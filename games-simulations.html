<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monopoly Market Simulation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1, h2, h3 {
            color: #2c3e50;
        }
        .panel {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
        .simulation-panel {
            background-color: #e8f4f8;
        }
        .case-studies {
            background-color: #f0f8e8;
        }
        .managerial-implications {
            background-color: #f8e8f0;
        }
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #2980b9;
        }
        input, select {
            padding: 8px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .score-display {
            font-size: 1.2em;
            font-weight: bold;
            color: #27ae60;
            margin: 15px 0;
        }
        .password-protection {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .password-box {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            text-align: center;
        }
        .hidden {
            display: none;
        }
        .market-data {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }
        .market-data div {
            flex: 1;
            min-width: 200px;
        }
        .decision-form {
            background-color: white;
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
        }
        .feedback {
            margin-top: 15px;
            padding: 10px;
            border-radius: 4px;
        }
        .positive {
            background-color: #d4edda;
            color: #155724;
        }
        .negative {
            background-color: #f8d7da;
            color: #721c24;
        }
        .graph-container {
            width: 100%;
            height: 300px;
            background-color: white;
            border: 1px solid #ddd;
            margin: 15px 0;
            position: relative;
        }
        .graph-line {
            position: absolute;
            height: 2px;
            background-color: #333;
        }
        .demand-curve {
            background-color: #e74c3c;
        }
        .mr-curve {
            background-color: #3498db;
        }
        .mc-curve {
            background-color: #2ecc71;
        }
        .atc-curve {
            background-color: #f39c12;
        }
    </style>
</head>
<body>
    <!-- Password Protection Screen -->
    <div id="passwordScreen" class="password-protection">
        <div class="password-box">
            <h2>Monopoly Simulation Access</h2>
            <p>Please enter the password to access the simulation:</p>
            <input type="password" id="passwordInput" placeholder="Enter password">
            <button onclick="checkPassword()">Submit</button>
            <p id="passwordError" style="color: red; display: none;">Incorrect password. Please try again.</p>
        </div>
    </div>

    <!-- Main Simulation Content (hidden initially) -->
    <div id="mainContent" class="container hidden">
        <h1>Monopoly Market Simulation</h1>
        
        <!-- Player Info and Score Display -->
        <div class="panel">
            <h2>Monopolist Dashboard</h2>
            <div class="score-display">
                Current Score: <span id="currentScore">0</span>/95
            </div>
            <p>Welcome to the monopoly market simulation. As the sole provider in this market, your goal is to make optimal pricing and production decisions to maximize profits while considering market demand.</p>
        </div>
        
        <!-- Simulation Panel -->
        <div class="panel simulation-panel">
            <h2>Monopoly Simulation</h2>
            <div class="market-data">
                <div>
                    <h3>Market Conditions</h3>
                    <p>Demand Function: P = <span id="demandFunction">100 - 0.5Q</span></p>
                    <p>Marginal Revenue: MR = <span id="mrFunction">100 - Q</span></p>
                    <p>Market Share: <span id="marketShare">100</span>%</p>
                </div>
                <div>
                    <h3>Your Monopoly</h3>
                    <p>Price: $<span id="currentPrice">0</span></p>
                    <p>Quantity Sold: <span id="quantitySold">0</span> units</p>
                    <p>Total Cost: $<span id="totalCost">0</span></p>
                    <p>Total Revenue: $<span id="totalRevenue">0</span></p>
                    <p>Profit: $<span id="profit">0</span></p>
                </div>
            </div>
            
            <div class="graph-container" id="monopolyGraph">
                <!-- Graph will be drawn here -->
            </div>
            
            <div class="decision-form">
                <h3>Make Your Monopoly Decision</h3>
                <label for="priceLevel">Set Price ($):</label>
                <input type="number" id="priceLevel" min="0" max="100" value="0">
                <span> or </span>
                <label for="quantityLevel">Set Quantity (units):</label>
                <input type="number" id="quantityLevel" min="0" max="200" value="0">
                <button onclick="submitMonopolyDecision()">Submit Decision</button>
                <button onclick="advanceYear()">Advance to Next Year</button>
                
                <div id="decisionFeedback" class="feedback hidden"></div>
            </div>
        </div>
        
        <!-- Case Studies -->
        <div class="panel case-studies">
            <h2>Monopoly Case Studies</h2>
            <div>
                <h3>Case Study 1: Natural Monopoly</h3>
                <p>Examine the characteristics of natural monopolies where average costs decline over the relevant range of output. Should these be regulated?</p>
                <button onclick="revealCaseStudyAnswer(1)">Reveal Analysis</button>
                <div id="caseStudy1Answer" class="hidden">
                    <p>Natural monopolies (like utilities) often face high fixed costs and declining average costs. Regulation may be needed to prevent abuse of monopoly power while ensuring the firm can cover costs.</p>
                </div>
            </div>
            <div>
                <h3>Case Study 2: Price Discrimination</h3>
                <p>Analyze how monopolies can increase profits through price discrimination. What are the different degrees and implications?</p>
                <button onclick="revealCaseStudyAnswer(2)">Reveal Analysis</button>
                <div id="caseStudy2Answer" class="hidden">
                    <p>First-degree (perfect) discrimination captures all consumer surplus. Second-degree uses quantity discounts. Third-degree segments markets. While increasing profits, it may improve efficiency by serving more customers.</p>
                </div>
            </div>
        </div>
        
        <!-- Managerial Implications -->
        <div class="panel managerial-implications">
            <h2>Managerial Implications</h2>
            <div>
                <h3>Profit Maximization</h3>
                <p>How should a monopolist determine the profit-maximizing price and quantity? What's different from perfect competition?</p>
                <button onclick="revealImplicationAnswer(1)">Show Implications</button>
                <div id="implication1Answer" class="hidden">
                    <p>A monopolist maximizes profit where MR = MC, then sets price on the demand curve. Unlike perfect competition, P > MR due to downward-sloping demand, allowing economic profits in long run.</p>
                </div>
            </div>
            <div>
                <h3>Barriers to Entry</h3>
                <p>What strategies can maintain monopoly power? How do barriers to entry affect long-term strategy?</p>
                <button onclick="revealImplicationAnswer(2)">Show Implications</button>
                <div id="implication2Answer" class="hidden">
                    <p>Monopolies sustain power through legal barriers (patents), control of resources, economies of scale, or strategic pricing. Managers must balance profit maximization with maintaining these barriers.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Password Protection
        const correctPassword = "Monopoly2023";
        
        function checkPassword() {
            const enteredPassword = document.getElementById('passwordInput').value;
            if (enteredPassword === correctPassword) {
                document.getElementById('passwordScreen').style.display = 'none';
                document.getElementById('mainContent').classList.remove('hidden');
                initializeSimulation();
            } else {
                document.getElementById('passwordError').style.display = 'block';
            }
        }
        
        // Simulation Variables
        let score = 0;
        let year = 1;
        let demandFunction = { intercept: 100, slope: -0.5 };
        let costStructure = {
            fixedCost: 1000,
            initialMC: 20,
            mcIncrement: 0.1,
            atcOffset: 30
        };
        let currentPrice = 0;
        let currentQuantity = 0;
        
        function initializeSimulation() {
            updateMarketDisplay();
            updateScore();
            drawGraph();
        }
        
        function calculateDemand(price) {
            return (price - demandFunction.intercept) / demandFunction.slope;
        }
        
        function calculatePrice(quantity) {
            return demandFunction.intercept + demandFunction.slope * quantity;
        }
        
        function calculateMR(quantity) {
            return demandFunction.intercept + 2 * demandFunction.slope * quantity;
        }
        
        function calculateMC(quantity) {
            return costStructure.initialMC + costStructure.mcIncrement * quantity;
        }
        
        function calculateATC(quantity) {
            return costStructure.atcOffset + (costStructure.fixedCost / quantity) + 
                   (costStructure.initialMC * 0.5) + (0.5 * costStructure.mcIncrement * quantity);
        }
        
        function calculateTotalCost(quantity) {
            return costStructure.fixedCost + 
                   (costStructure.initialMC * quantity) + 
                   (0.5 * costStructure.mcIncrement * quantity * quantity);
        }
        
        function updateMarketDisplay() {
            document.getElementById('currentPrice').textContent = currentPrice.toFixed(2);
            document.getElementById('quantitySold').textContent = currentQuantity.toFixed(0);
            document.getElementById('totalCost').textContent = calculateTotalCost(currentQuantity).toFixed(2);
            document.getElementById('totalRevenue').textContent = (currentPrice * currentQuantity).toFixed(2);
            document.getElementById('profit').textContent = (currentPrice * currentQuantity - calculateTotalCost(currentQuantity)).toFixed(2);
        }
        
        function submitMonopolyDecision() {
            const priceInput = document.getElementById('priceLevel');
            const quantityInput = document.getElementById('quantityLevel');
            
            let newPrice = parseFloat(priceInput.value);
            let newQuantity = parseFloat(quantityInput.value);
            
            // If both entered, prefer quantity (more economically accurate for monopoly)
            if (!isNaN(newQuantity) && newQuantity >= 0) {
                currentQuantity = newQuantity;
                currentPrice = calculatePrice(currentQuantity);
            } else if (!isNaN(newPrice) && newPrice >= 0) {
                currentPrice = newPrice;
                currentQuantity = calculateDemand(currentPrice);
            } else {
                alert("Please enter valid price or quantity");
                return;
            }
            
            updateMarketDisplay();
            drawGraph();
            
            // Provide feedback and score
            const feedback = document.getElementById('decisionFeedback');
            feedback.classList.remove('hidden');
            
            // Calculate profit-maximizing quantity (MR = MC)
            const optimalQuantity = (demandFunction.intercept - costStructure.initialMC) / 
                                  (2 * -demandFunction.slope + costStructure.mcIncrement);
            const optimalPrice = calculatePrice(optimalQuantity);
            
            const profitDifference = Math.abs((currentPrice * currentQuantity - calculateTotalCost(currentQuantity)) - 
                                           (optimalPrice * optimalQuantity - calculateTotalCost(optimalQuantity)));
            
            if (profitDifference < 50) {
                feedback.textContent = "Excellent decision! You're very close to the profit-maximizing point where MR = MC.";
                feedback.className = "feedback positive";
                addToScore(5);
            } else if (profitDifference < 150) {
                feedback.textContent = "Good decision, but not optimal. Remember to produce where MR = MC, then set price on the demand curve.";
                feedback.className = "feedback positive";
                addToScore(3);
            } else {
                feedback.textContent = "Consider adjusting your decision. As a monopolist, you should produce where MR = MC, then charge the highest price the market will bear.";
                feedback.className = "feedback negative";
                addToScore(1);
            }
        }
        
        function advanceYear() {
            year++;
            
            // Random market fluctuations
            const demandChange = Math.floor(Math.random() * 21) - 10; // -10 to +10
            demandFunction.intercept = Math.max(60, demandFunction.intercept + demandChange);
            
            // Cost changes over time
            costStructure.initialMC += (Math.random() * 4 - 2); // -2 to +2
            
            // Reset decision feedback
            document.getElementById('decisionFeedback').classList.add('hidden');
            
            // Update display
            document.getElementById('demandFunction').textContent = 
                `${demandFunction.intercept.toFixed(0)} ${demandFunction.slope > 0 ? '+' : ''}${demandFunction.slope.toFixed(1)}Q`;
            document.getElementById('mrFunction').textContent = 
                `${demandFunction.intercept.toFixed(0)} ${2*demandFunction.slope > 0 ? '+' : ''}${(2*demandFunction.slope).toFixed(1)}Q`;
            
            drawGraph();
            
            // Add time-based points
            addToScore(2);
        }
        
        function drawGraph() {
            const graph = document.getElementById('monopolyGraph');
            graph.innerHTML = '';
            
            const width = graph.offsetWidth;
            const height = graph.offsetHeight;
            const maxQ = 200;
            const maxP = demandFunction.intercept * 1.2;
            
            // Draw axes
            const xAxis = document.createElement('div');
            xAxis.className = 'graph-line';
            xAxis.style.width = width + 'px';
            xAxis.style.bottom = '20px';
            xAxis.style.left = '0';
            graph.appendChild(xAxis);
            
            const yAxis = document.createElement('div');
            yAxis.className = 'graph-line';
            yAxis.style.height = height + 'px';
            yAxis.style.left = '20px';
            yAxis.style.top = '0';
            graph.appendChild(yAxis);
            
            // Draw demand curve (P = a + bQ)
            for (let q = 0; q < maxQ; q += 5) {
                const p = calculatePrice(q);
                const demandPoint = document.createElement('div');
                demandPoint.className = 'graph-line demand-curve';
                demandPoint.style.width = '2px';
                demandPoint.style.height = '2px';
                demandPoint.style.left = (20 + (q/maxQ * (width-40))) + 'px';
                demandPoint.style.bottom = (20 + (p/maxP * (height-40))) + 'px';
                graph.appendChild(demandPoint);
            }
            
            // Draw MR curve (MR = a + 2bQ)
            for (let q = 0; q < maxQ; q += 5) {
                const mr = calculateMR(q);
                if (mr > 0) {
                    const mrPoint = document.createElement('div');
                    mrPoint.className = 'graph-line mr-curve';
                    mrPoint.style.width = '2px';
                    mrPoint.style.height = '2px';
                    mrPoint.style.left = (20 + (q/maxQ * (width-40))) + 'px';
                    mrPoint.style.bottom = (20 + (mr/maxP * (height-40))) + 'px';
                    graph.appendChild(mrPoint);
                }
            }
            
            // Draw MC curve
            for (let q = 0; q < maxQ; q += 5) {
                const mc = calculateMC(q);
                const mcPoint = document.createElement('div');
                mcPoint.className = 'graph-line mc-curve';
                mcPoint.style.width = '2px';
                mcPoint.style.height = '2px';
                mcPoint.style.left = (20 + (q/maxQ * (width-40))) + 'px';
                mcPoint.style.bottom = (20 + (mc/maxP * (height-40))) + 'px';
                graph.appendChild(mcPoint);
            }
            
            // Draw ATC curve
            for (let q = 10; q < maxQ; q += 5) {
                const atc = calculateATC(q);
                const atcPoint = document.createElement('div');
                atcPoint.className = 'graph-line atc-curve';
                atcPoint.style.width = '2px';
                atcPoint.style.height = '2px';
                atcPoint.style.left = (20 + (q/maxQ * (width-40))) + 'px';
                atcPoint.style.bottom = (20 + (atc/maxP * (height-40))) + 'px';
                graph.appendChild(atcPoint);
            }
            
            // Mark current decision if exists
            if (currentQuantity > 0) {
                const decisionPoint = document.createElement('div');
                decisionPoint.style.position = 'absolute';
                decisionPoint.style.width = '8px';
                decisionPoint.style.height = '8px';
                decisionPoint.style.backgroundColor = 'black';
                decisionPoint.style.borderRadius = '50%';
                decisionPoint.style.left = (20 + (currentQuantity/maxQ * (width-40)) - 4) + 'px';
                decisionPoint.style.bottom = (20 + (currentPrice/maxP * (height-40)) - 4) + 'px';
                graph.appendChild(decisionPoint);
            }
        }
        
        function addToScore(points) {
            // Ensure score never reaches 100%
            const maxPossible = 95;
            score = Math.min(score + points, maxPossible);
            updateScore();
        }
        
        function updateScore() {
            document.getElementById('currentScore').textContent = score;
        }
        
        function revealCaseStudyAnswer(studyNum) {
            document.getElementById(`caseStudy${studyNum}Answer`).classList.remove('hidden');
            addToScore(2);
        }
        
        function revealImplicationAnswer(impNum) {
            document.getElementById(`implication${impNum}Answer`).classList.remove('hidden');
            addToScore(2);
        }
    </script>
</body>
</html>
