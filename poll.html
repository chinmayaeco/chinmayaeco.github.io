<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfect Competition Market Simulation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1, h2, h3 {
            color: #2c3e50;
        }
        .panel {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
        .simulation-panel {
            background-color: #e8f4f8;
        }
        .case-studies {
            background-color: #f0f8e8;
        }
        .managerial-implications {
            background-color: #f8e8f0;
        }
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #2980b9;
        }
        input, select {
            padding: 8px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .score-display {
            font-size: 1.2em;
            font-weight: bold;
            color: #27ae60;
            margin: 15px 0;
        }
        .password-protection {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .password-box {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            text-align: center;
        }
        .hidden {
            display: none;
        }
        .market-data {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }
        .market-data div {
            flex: 1;
            min-width: 200px;
        }
        .decision-form {
            background-color: white;
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
        }
        .feedback {
            margin-top: 15px;
            padding: 10px;
            border-radius: 4px;
        }
        .positive {
            background-color: #d4edda;
            color: #155724;
        }
        .negative {
            background-color: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <!-- Password Protection Screen -->
    <div id="passwordScreen" class="password-protection">
        <div class="password-box">
            <h2>Market Simulation Access</h2>
            <p>Please enter the password to access the simulation:</p>
            <input type="password" id="passwordInput" placeholder="Enter password">
            <button onclick="checkPassword()">Submit</button>
            <p id="passwordError" style="color: red; display: none;">Incorrect password. Please try again.</p>
        </div>
    </div>

    <!-- Main Simulation Content (hidden initially) -->
    <div id="mainContent" class="container hidden">
        <h1>Perfect Competition Market Simulation</h1>
        
        <!-- Player Info and Score Display -->
        <div class="panel">
            <h2>Player Dashboard</h2>
            <div class="score-display">
                Current Score: <span id="currentScore">0</span>/95
            </div>
            <p>Welcome to the perfect competition market simulation. Your goal is to make optimal production and pricing decisions to maximize profits in a perfectly competitive market.</p>
        </div>
        
        <!-- Simulation Panel -->
        <div class="panel simulation-panel">
            <h2>Market Simulation</h2>
            <div class="market-data">
                <div>
                    <h3>Market Conditions</h3>
                    <p>Market Price: $<span id="marketPrice">50</span></p>
                    <p>Market Demand: <span id="marketDemand">10,000</span> units</p>
                    <p>Number of Firms: <span id="numFirms">100</span></p>
                </div>
                <div>
                    <h3>Your Firm</h3>
                    <p>Current Output: <span id="currentOutput">0</span> units</p>
                    <p>Total Cost: $<span id="totalCost">0</span></p>
                    <p>Total Revenue: $<span id="totalRevenue">0</span></p>
                    <p>Profit: $<span id="profit">0</span></p>
                </div>
            </div>
            
            <div class="decision-form">
                <h3>Make Your Decision</h3>
                <label for="productionLevel">Production Level (units):</label>
                <input type="number" id="productionLevel" min="0" max="200" value="0">
                <button onclick="submitDecision()">Submit Decision</button>
                <button onclick="advanceQuarter()">Advance to Next Quarter</button>
                
                <div id="decisionFeedback" class="feedback hidden"></div>
            </div>
        </div>
        
        <!-- Case Studies -->
        <div class="panel case-studies">
            <h2>Case Studies</h2>
            <div>
                <h3>Case Study 1: Short-Run vs. Long-Run Decisions</h3>
                <p>Analyze how firms in perfect competition make different decisions in the short run versus the long run. Consider fixed and variable costs in your analysis.</p>
                <button onclick="revealCaseStudyAnswer(1)">Reveal Analysis</button>
                <div id="caseStudy1Answer" class="hidden">
                    <p>In the short run, firms may operate at a loss if they can cover variable costs, as fixed costs are sunk. In the long run, firms will exit if they cannot cover all costs, leading to market adjustments.</p>
                </div>
            </div>
            <div>
                <h3>Case Study 2: Market Entry and Exit</h3>
                <p>Examine how profits and losses signal resource allocation in perfect competition. What happens when firms enter or exit the market?</p>
                <button onclick="revealCaseStudyAnswer(2)">Reveal Analysis</button>
                <div id="caseStudy2Answer" class="hidden">
                    <p>Economic profits attract new firms, increasing supply and lowering prices until profits are normal. Losses cause firms to exit, reducing supply and raising prices until remaining firms break even.</p>
                </div>
            </div>
        </div>
        
        <!-- Managerial Implications -->
        <div class="panel managerial-implications">
            <h2>Managerial Implications</h2>
            <div>
                <h3>Cost Control</h3>
                <p>In perfect competition, firms are price takers. The only way to increase profits is by reducing costs. What strategies can managers use?</p>
                <button onclick="revealImplicationAnswer(1)">Show Implications</button>
                <div id="implication1Answer" class="hidden">
                    <p>Managers should focus on operational efficiency, technology adoption, and optimal input combinations to minimize average costs while maintaining quality.</p>
                </div>
            </div>
            <div>
                <h3>Production Decisions</h3>
                <p>How should managers determine the optimal quantity to produce in a perfectly competitive market?</p>
                <button onclick="revealImplicationAnswer(2)">Show Implications</button>
                <div id="implication2Answer" class="hidden">
                    <p>The profit-maximizing output occurs where marginal cost equals market price (MC=P). Managers should adjust production to this level while ensuring they can cover average total costs in the long run.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Password Protection
        const correctPassword = "EconSim2023";
        
        function checkPassword() {
            const enteredPassword = document.getElementById('passwordInput').value;
            if (enteredPassword === correctPassword) {
                document.getElementById('passwordScreen').style.display = 'none';
                document.getElementById('mainContent').classList.remove('hidden');
                initializeSimulation();
            } else {
                document.getElementById('passwordError').style.display = 'block';
            }
        }
        
        // Simulation Variables
        let score = 0;
        let quarter = 1;
        let marketPrice = 50;
        let currentOutput = 0;
        let totalCost = 0;
        let totalRevenue = 0;
        let profit = 0;
        let costStructure = {
            fixedCost: 500,
            variableCostPerUnit: 30,
            costIncrement: 2 // Cost increases as output increases due to diminishing returns
        };
        
        function initializeSimulation() {
            updateMarketDisplay();
            updateScore();
        }
        
        function updateMarketDisplay() {
            document.getElementById('marketPrice').textContent = marketPrice;
            document.getElementById('currentOutput').textContent = currentOutput;
            document.getElementById('totalCost').textContent = calculateTotalCost(currentOutput);
            document.getElementById('totalRevenue').textContent = calculateTotalRevenue(currentOutput);
            document.getElementById('profit').textContent = calculateProfit(currentOutput);
        }
        
        function calculateTotalCost(output) {
            // Quadratic cost function to reflect increasing marginal costs
            return costStructure.fixedCost + 
                   (costStructure.variableCostPerUnit * output) + 
                   (0.5 * costStructure.costIncrement * output * output);
        }
        
        function calculateTotalRevenue(output) {
            return output * marketPrice;
        }
        
        function calculateProfit(output) {
            totalCost = calculateTotalCost(output);
            totalRevenue = calculateTotalRevenue(output);
            return totalRevenue - totalCost;
        }
        
        function submitDecision() {
            const productionInput = document.getElementById('productionLevel');
            const newOutput = parseInt(productionInput.value);
            
            if (isNaN(newOutput) || newOutput < 0) {
                alert("Please enter a valid production quantity");
                return;
            }
            
            currentOutput = newOutput;
            profit = calculateProfit(currentOutput);
            
            updateMarketDisplay();
            
            // Provide feedback and score
            const feedback = document.getElementById('decisionFeedback');
            feedback.classList.remove('hidden');
            
            // Calculate optimal output where MC = P
            const optimalOutput = Math.round((marketPrice - costStructure.variableCostPerUnit) / costStructure.costIncrement);
            
            if (currentOutput === optimalOutput) {
                feedback.textContent = "Perfect decision! You're producing at the profit-maximizing quantity where marginal cost equals price.";
                feedback.className = "feedback positive";
                addToScore(5); // Max points for perfect decision
            } else if (Math.abs(currentOutput - optimalOutput) <= 5) {
                feedback.textContent = "Good decision! You're close to the optimal production level. Try adjusting slightly to maximize profits.";
                feedback.className = "feedback positive";
                addToScore(3);
            } else {
                feedback.textContent = "Consider adjusting your production. In perfect competition, profit is maximized where marginal cost equals price.";
                feedback.className = "feedback negative";
                addToScore(1); // Minimal points for incorrect decision
            }
        }
        
        function advanceQuarter() {
            quarter++;
            
            // Random market fluctuations
            const fluctuation = Math.floor(Math.random() * 11) - 5; // -5 to +5
            marketPrice += fluctuation;
            
            // Ensure price doesn't go below certain threshold
            if (marketPrice < 30) marketPrice = 30;
            
            // Reset decision feedback
            document.getElementById('decisionFeedback').classList.add('hidden');
            
            // Update display
            updateMarketDisplay();
            
            // Add time-based points
            addToScore(2);
        }
        
        function addToScore(points) {
            // Ensure score never reaches 100%
            const maxPossible = 95;
            score = Math.min(score + points, maxPossible);
            updateScore();
        }
        
        function updateScore() {
            document.getElementById('currentScore').textContent = score;
        }
        
        function revealCaseStudyAnswer(studyNum) {
            document.getElementById(`caseStudy${studyNum}Answer`).classList.remove('hidden');
            addToScore(2); // Points for reviewing case studies
        }
        
        function revealImplicationAnswer(impNum) {
            document.getElementById(`implication${impNum}Answer`).classList.remove('hidden');
            addToScore(2); // Points for reviewing implications
        }
    </script>
</body>
</html>
